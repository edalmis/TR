import{s as X,f as g,a as E,g as p,h as k,d as _,c as w,j as v,i as R,u as d,w as T,y as q,A as y,o as z,l as P,m as Q,v as M,n as U,r as F,Q as O,x as G}from"../chunks/scheduler.7c1da786.js";import{e as N}from"../chunks/each.e59479a4.js";import{S as H,i as J}from"../chunks/index.7a22757c.js";import{s as K,j as L}from"../chunks/store.7f25bae6.js";function B(r,s,l){const o=r.slice();return o[9]=s[l],o}function C(r,s,l){const o=r.slice();return o[12]=s[l],o[14]=l,o}function A(r){let s,l,o=(r[12].userOne.userName==r[5].userName?r[12].userTwo.userName:r[12].userOne.userName)+"",c,t,n,e;function u(){return r[6](r[12],r[14])}return{c(){s=g("div"),l=g("div"),c=P(o),t=E(),this.h()},l(a){s=p(a,"DIV",{class:!0});var f=k(s);l=p(f,"DIV",{class:!0});var D=k(l);c=Q(D,o),D.forEach(_),t=w(f),f.forEach(_),this.h()},h(){v(l,"class","room-name"),v(s,"class","room svelte-10mcx3e")},m(a,f){R(a,s,f),d(s,l),d(l,c),d(s,t),n||(e=M(s,"click",u),n=!0)},p(a,f){r=a,f&33&&o!==(o=(r[12].userOne.userName==r[5].userName?r[12].userTwo.userName:r[12].userOne.userName)+"")&&U(c,o)},d(a){a&&_(s),n=!1,e()}}}function S(r){let s,l,o,c,t,n,e,u="send",a,f,D=N(r[2]),i=[];for(let h=0;h<D.length;h+=1)i[h]=j(B(r,D,h));return{c(){s=g("div"),l=g("div");for(let h=0;h<i.length;h+=1)i[h].c();o=E(),c=g("div"),t=g("textarea"),n=E(),e=g("button"),e.textContent=u,this.h()},l(h){s=p(h,"DIV",{class:!0});var I=k(s);l=p(I,"DIV",{class:!0});var m=k(l);for(let V=0;V<i.length;V+=1)i[V].l(m);m.forEach(_),o=w(I),c=p(I,"DIV",{class:!0});var b=k(c);t=p(b,"TEXTAREA",{class:!0}),k(t).forEach(_),n=w(b),e=p(b,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-10ix1eh"&&(e.textContent=u),b.forEach(_),I.forEach(_),this.h()},h(){v(l,"class","message-list overflow-y-scroll svelte-10mcx3e"),v(t,"class","w-full h-full"),v(e,"class","absolute right-5 top-1/2 -translate-y-1/2 p-3 bg-blue-400"),v(c,"class","chat-wrapper svelte-10mcx3e"),v(s,"class","direct-chat svelte-10mcx3e")},m(h,I){R(h,s,I),d(s,l);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(l,null);d(s,o),d(s,c),d(c,t),O(t,r[3]),d(c,n),d(c,e),a||(f=[M(t,"input",r[7]),M(e,"click",r[8])],a=!0)},p(h,I){if(I&36){D=N(h[2]);let m;for(m=0;m<D.length;m+=1){const b=B(h,D,m);i[m]?i[m].p(b,I):(i[m]=j(b),i[m].c(),i[m].m(l,null))}for(;m<i.length;m+=1)i[m].d(1);i.length=D.length}I&8&&O(t,h[3])},d(h){h&&_(s),q(i,h),a=!1,G(f)}}}function j(r){let s,l,o=r[9].message+"",c,t,n;return{c(){s=g("div"),l=g("div"),c=P(o),n=E(),this.h()},l(e){s=p(e,"DIV",{class:!0});var u=k(s);l=p(u,"DIV",{class:!0});var a=k(l);c=Q(a,o),a.forEach(_),n=w(u),u.forEach(_),this.h()},h(){v(l,"class",t="message "+(r[9].sendBy==r[5].id42?"right-0":"left-0")+" svelte-10mcx3e"),v(s,"class","relative w-full h-40 p-2")},m(e,u){R(e,s,u),d(s,l),d(l,c),d(s,n)},p(e,u){u&4&&o!==(o=e[9].message+"")&&U(c,o),u&36&&t!==(t="message "+(e[9].sendBy==e[5].id42?"right-0":"left-0")+" svelte-10mcx3e")&&v(l,"class",t)},d(e){e&&_(s)}}}function W(r){let s,l,o,c=N(r[0]),t=[];for(let e=0;e<c.length;e+=1)t[e]=A(C(r,c,e));let n=r[1]!==-1&&S(r);return{c(){s=g("div"),l=g("div");for(let e=0;e<t.length;e+=1)t[e].c();o=E(),n&&n.c(),this.h()},l(e){s=p(e,"DIV",{class:!0});var u=k(s);l=p(u,"DIV",{class:!0});var a=k(l);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(_),o=w(u),n&&n.l(u),u.forEach(_),this.h()},h(){v(l,"class","room-list svelte-10mcx3e"),v(s,"class","w-full h-full flex")},m(e,u){R(e,s,u),d(s,l);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,null);d(s,o),n&&n.m(s,null)},p(e,[u]){if(u&51){c=N(e[0]);let a;for(a=0;a<c.length;a+=1){const f=C(e,c,a);t[a]?t[a].p(f,u):(t[a]=A(f),t[a].c(),t[a].m(l,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=c.length}e[1]!==-1?n?n.p(e,u):(n=S(e),n.c(),n.m(s,null)):n&&(n.d(1),n=null)},i:T,o:T,d(e){e&&_(s),q(t,e),n&&n.d()}}}function Y(r,s,l){let o,c;y(r,K,i=>l(4,o=i)),y(r,L,i=>l(5,c=i));let t=[],n=-1,e=[],u="";z(()=>{if(o)return o.emit("getDmRooms"),o.on("repDmRooms",i=>{l(0,t=i.rooms),console.log("repDmRooms:",t)}),o.on("repMessagesInDmRooms",i=>{console.log("repMessagesInDmRooms:",i.messages),l(2,e=i.messages)}),o.on("newMessage",i=>{console.log(i),l(2,e=[...e,i])}),()=>{o.off("repDmRooms"),o.off("repMessagesInDmRooms")}});const a=(i,h)=>{console.log("click"),o.emit("getMessagesInDmRoom",i.id),l(1,n=h)};function f(){u=this.value,l(3,u)}return[t,n,e,u,o,c,a,f,()=>{o.emit("sendMessage",{message:u,sendBy:c.id42,sendTo:t[n].userOneId==c.id42?t[n].userTwoId:t[n].userOneId}),l(3,u="")}]}class se extends H{constructor(s){super(),J(this,s,Y,W,X,{})}}export{se as component};
